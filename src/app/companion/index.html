<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../assets/style/app.css">
</head>

<div id="topbar">
    <h1 id="version">Loading metadata..</h1>
    <button>X</button>
</div>

<body data-page="Home">

    <div id="main">
        <h1>Companion Home</h1>
        <h3 id="now-playing">Play a sound from your Freedeck!</h3>
        <input type="range" min="1" step="1" max="15" id="screenSaverActivationTime">
        <label for="screenSaverActivationTime">Screensaver activation time (seconds):</label>
        <label for="screenSaverActivationTime" id="amt">5</label>
        <br />
        <input type="range" min="0" max="1" step="0.1" value="1" id="out-vol" onchange="volChanged()">
        <label for="out-vol">Volume</label>
        <br />
        <input type="range" min="0" max="2" value="1" step="0.1" id="out-pbr" onchange="pbrChanged()">
        <label for="out-pbr">Playback Rate</label>
        <br />
        <select id="sai"></select>
        <label for="sai">Select Output <strong>(VB-Cable)</strong></label>
        <br /> <br />
        <div class="functions">
            <button onclick="setSet()">Set</button>
            <button onclick="universal.socket.emit('fd.companion.change')">Remote Reload</button>
            <button onclick="universal.socket.emit('press-sound', 'Stop All', 'Stop All')">Stop All</button>
        </div>
        <br /> <br />
        <details>
            <summary><h2>Icon Editor</h2></summary>
            <div class="functions">
                <button onclick="createNewSound()">New Button</button>
                <button onclick="bp()">Previous Page</button>
                <button onclick="np()">Next Page</button>
            </div>
            <div id="myModal" class="modal">
                <div class="modal-content">
                    <div class="modal-header" id="mh">
                        <h2 id="mhe"></h2>
                    </div>
                    <div class="modal-body" id="mc">
                        <label for="newname"><h3>Name</h3></label>
                        <input type="text" id="newname" value="" />
                        <br />
                        <div id="mcmultikey"></div>
                        <h3>Information</h3>
                        <label id="npl" for="newpath">Sound Name:</label>
                        <input id="newpath" value="" disabled/>
                        <br/>
                        <label id="ul" for="uuid">UUID:</label>
                        <input id="uuid" disabled>
                        <br/>
                        <label id="ty" for="type">Sound Type:</label>
                        <input id="type" disabled>
                        <h3>Options</h3>
                        <div class="functions">
                            <button id="mcip"></button>
                            <button id="mcsu" style="display: none;">Upload Sound</button>
                            <!-- data-orig-key data-orig-name -->
                            <button id="mcdel" onclick="DeleteKey({ name: document.querySelector('#mhe').getAttribute('data-orig-name') });">Delete Button</button>
                            <button id="mcset" onclick="changeInfo(document.querySelector('#mhe').getAttribute('data-orig-key'));" class="white-txt">Set</button>
                            <button id="mcnp" onclick="sortNP(document.querySelector('#mhe').getAttribute('data-orig-name'), document.querySelector('#uuid').value)">Move to next page</button>
                            <button id="mcnp" onclick="sortBP(document.querySelector('#mhe').getAttribute('data-orig-name'), document.querySelector('#uuid').value)">Move to last page</button>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <h3>Freedeck Companion</h3>
                    </div>
                </div>
            </div>
            <br />
            <div id="keys" style="background-color: rgba(0, 0, 0, 0.19); padding: 15px; border-radius: 15px;">
            </div>
        </details>
        <br/>
        <details>
            <summary><h2>Themes</h2></summary>
            <div id="themechoices" class="experiment"></div>
            <details>
                <summary><h3>Theme Tools</h3></summary>
                <div class="functions">
                    <input type="text" id="theme-import" placeholder="Freedeck Theme Code">
                    <button onclick="importTheme()">Import Theme</button>
                    <button onclick="universal.exportTheme()">Export Theme</button>
                    <button onclick="removeTheme()">Remove Custom Theme</button>
                </div>
                <input id="theme-exported" placeholder="Exported Theme" disabled>
            </details>
        </details>
        <br/>
        <details>
            <summary><h2>Danger Zone</h2></summary>
            <div class="functions">
                <a href="/"><button>To Freedeck UI</button></a>
                <button onclick="reset()">Reset</button>
            </div>
        </details>
        <br/>
        <details>
            <summary><h2>Plugins Connected</h2></summary>
            <div class="plugins"></div>
        </details>
    </div>
    <div id="console"></div>


    <script>
      const reset = () => {
        if(confirm("Are you sure you want to reset? Your custom theme alongside all other settings will be removed on reset.")) {
          universal.socket.emit('fd.companion.reset')
        }
      }

    </script>

    <!-- Libraries -->
    <script src="/socket.io/socket.io.js"></script>
    <script src="scripts/Sortable.min.js"></script>
    <script src="../assets/scripts/universal.js"></script>
    <script src="../assets/scripts/Susaudio.js"></script>
    <script src="../../sounds.js"></script>
    <!-- My scripts -->
    <script src="scripts/index.js"></script>
    <script src="scripts/global.js"></script>
    <script src="scripts/sorts.js"></script>
    <script src="scripts/theming.js"></script>
    <script src="scripts/soundboard.js"></script>
    <script src="scripts/soundboard-universal.js"></script>
</body>

</html>
